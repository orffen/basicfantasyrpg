<section
  class="tab combat {{tabs.combat.cssClass}}"
  data-group="{{tabs.combat.group}}"
  data-tab="{{tabs.combat.id}}">

  <div class="tab-container grid">

    <!-- abilities and saves -->
    <div class="sidebar abilities-saves">
      <div class="abilities flexcol">
        {{#each data.abilities as |ability key|}}
          <div class="ability flexrow flex-group-center">
            <label for="system.abilities.{{key}}.value" class="resource-label rollable flexlarge align-left" title="{{localize 'BASICFANTASYRPG.Roll'}} {{localize 'BASICFANTASYRPG.AbilityCheck'}}" data-roll="d20{{numberFormat ability.bonus decimals=0 sign=true}}" data-label="{{ability.label}}" data-target-number="{{calculateAbilityTargetNumber ../data.level.value}}">{{ability.label}}</label>
            <input type="text" name="system.abilities.{{key}}.value" value="{{ability.value}}" data-dtype="Number"/>
            <span class="ability-mod rollable" title="{{localize 'BASICFANTASYRPG.Roll'}} {{localize 'BASICFANTASYRPG.AbilityCheck'}}" data-roll="d20{{numberFormat ability.bonus decimals=0 sign=true}}" data-label="{{ability.label}}" data-target-number="{{calculateAbilityTargetNumber ../data.level.value}}">{{numberFormat ability.bonus decimals=0 sign=true}}</span>
          </div>
        {{/each}}

        <hr>

        {{#each data.saves as |save key|}}
          <div class="ability flexrow flex-group-center">
            <label for="system.saves.{{key}}.value" class="resource-label rollable flexlarge align-left" title="{{localize 'BASICFANTASYRPG.Roll'}} {{localize 'BASICFANTASYRPG.SavingThrow'}}" data-roll="d20" data-label="{{localize 'BASICFANTASYRPG.SavingThrow'}} - {{save.label}}" data-target-number="{{save.value}}">{{save.label}}</label>
            <input type="text" name="system.saves.{{key}}.value" value="{{save.value}}" data-dtype="Number"/>
          </div>
        {{/each}}
      </div>
    </div>

    <div class="combat-main">
      <!-- AC, AB, move, initiative -->
      <section class="resources grid grid-4col">

        <div class="resource flex-group-center">
          <label for="system.armorClass.value" class="resource-label">{{localize data.armorClass.abbr}}</label>
          <div class="resource-content flexrow flex-center flex-between">
            <input type="number" name="system.armorClass.value" value="{{data.armorClass.value}}" data-dtype="Number"/>
          </div>
        </div>

        <div class="resource flex-group-center">
          <label for="system.attackBonus.value" class="resource-label">{{localize data.attackBonus.abbr}}</label>
          <div class="resource-content flexrow flex-center flex-between">
            <input type="number" name="system.attackBonus.value" value="{{data.attackBonus.value}}" data-dtype="Number" {{#if (eq actor.type 'monster')}}disabled{{/if}}/>
          </div>
        </div>

        <div class="resource flex-group-center">
          <label for="system.move.value" class="resource-label">{{localize data.move.label}}</label>
          <div class="resource-content flexrow flex-center flex-between">
            <input type="text" name="system.move.value" value="{{data.move.value}}" data-dtype="String"/>
          </div>
        </div>

        <div class="resource flex-group-center">
          <label for="system.initBonus.value" class="resource-label">{{localize data.initBonus.label}}</label>
          <div class="resource-content flexrow flex-center flex-between">
            <input type="number" name="system.initBonus.value" value="{{data.initBonus.value}}" data-dtype="Number"/>
          </div>
        </div>

      </section>

      <ol class="items-list">
        <li class="item flexrow items-header">
          <div class="item-name">{{localize 'ITEM.TypeWeapon'}}</div>
          <div class="item-detail">{{localize 'BASICFANTASYRPG.Attack'}}&nbsp;/&nbsp;{{localize 'BASICFANTASYRPG.DamageAbbr'}}</div>
          <div class="item-controls">
            <a class="item-control item-create" title="Create item" data-type="weapon"><i class="fas fa-plus"></i> {{localize 'BASICFANTASYRPG.Add'}}</a>
          </div>
        </li>
        {{#each weapons as |weapon id|}}
          <li class="item flexrow" data-item-id="{{weapon._id}}">
            <div class="item-name">
              <div class="item-image">
                <a class="rollable" data-roll-type="item"><img src="{{weapon.img}}" title="{{weapon.name}}" width="24" height="24"/></a>
              </div>
              <h4>{{weapon.name}}</h4>
            </div>
            <div class="item-prop item-image">
              <a class="rollable" data-roll-type="weapon" data-attack="melee">{{> iconMelee}}</a>
              <a class="rollable" data-roll-type="weapon" data-attack="ranged">{{> iconRanged}}</a>
              <span class="flexshrink">/</span>
              <a class="rollable" data-roll-type="damage" data-roll="{{weapon.system.damage.value}}" data-label="{{weapon.name}} {{localizeLowerCase weapon.system.damage.label}}">{{> iconDamage}}</a>
            </div>
            <div class="item-controls">
              <a class="item-control item-edit" title="Edit Item"><i class="fas fa-edit"></i></a>
              <a class="item-control item-delete" title="Delete Item"><i class="fas fa-trash"></i></a>
            </div>
          </li>
        {{/each}}
      </ol>

      <ol class="items-list">
        <li class="item flexrow items-header">
          <div class="item-name">{{localize 'ITEM.TypeArmor'}}</div>
          <div class="item-detail">{{localize 'BASICFANTASYRPG.ArmorClass'}}</div>
          <div class="item-controls">
            <a class="item-control item-create" title="Create item" data-type="armor"><i class="fas fa-plus"></i> {{localize 'BASICFANTASYRPG.Add'}}</a>
          </div>
        </li>
        {{#each armors as |armor id|}}
          <li class="item flexrow" data-item-id="{{armor._id}}">
            <div class="item-name">
              <div class="item-image">
                <a class="rollable" data-roll-type="item"><img src="{{armor.img}}" title="{{armor.name}}" width="24" height="24"/></a>
              </div>
              <h4>{{armor.name}}</h4>
            </div>
            <div class="item-prop">{{localize armor.system.armorClass.abbr}} {{armor.system.armorClass.value}}</div>
            <div class="item-controls">
              <a class="item-control item-edit" title="Edit Item"><i class="fas fa-edit"></i></a>
              <a class="item-control item-delete" title="Delete Item"><i class="fas fa-trash"></i></a>
            </div>
          </li>
        {{/each}}
      </ol>
    </div>
  </div>
</section>